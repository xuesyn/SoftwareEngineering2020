{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/pro/Desktop/GoEasyDemo-Uniapp-LiveChatRoom/pages/vue/chatroom/chatroom.vue?4358","webpack:///C:/Users/pro/Desktop/GoEasyDemo-Uniapp-LiveChatRoom/pages/vue/chatroom/chatroom.vue?5e05","webpack:///C:/Users/pro/Desktop/GoEasyDemo-Uniapp-LiveChatRoom/pages/vue/chatroom/chatroom.vue?8830","webpack:///C:/Users/pro/Desktop/GoEasyDemo-Uniapp-LiveChatRoom/pages/vue/chatroom/chatroom.vue?e775","uni-app:///pages/vue/chatroom/chatroom.vue","webpack:///C:/Users/pro/Desktop/GoEasyDemo-Uniapp-LiveChatRoom/pages/vue/chatroom/chatroom.vue?cefc","webpack:///C:/Users/pro/Desktop/GoEasyDemo-Uniapp-LiveChatRoom/pages/vue/chatroom/chatroom.vue?9813"],"names":["createPage","Page"],"mappings":"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","file":"pages/vue/chatroom/chatroom.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/vue/chatroom/chatroom.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chatroom.vue?vue&type=template&id=5c0ffc9d&\"\nvar renderjs\nimport script from \"./chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatroom.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/vue/chatroom/chatroom.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=template&id=5c0ffc9d&\"","var components = {\n  uniPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=script&lang=js&\"","<template>\r\n    <view class=\"chat-room\">\r\n\t\t<uni-popup ref=\"popupAsk\" type=\"dialog\">\r\n\t\t\t<uni-popup-dialog mode=\"base\" title=\"提示\" content=\"房主正在询问你是否准备完成\" @confirm=\"checked\"></uni-popup-dialog>\r\n\t\t</uni-popup>\r\n\t\t<uni-popup ref=\"popupCount\" type=\"dialog\">\r\n\t\t\t<uni-popup-dialog mode=\"input\" placeholder=\"输入游戏轮数\" title=\"输入\" @confirm=\"gameTurns\"></uni-popup-dialog>\r\n\t\t</uni-popup>\r\n\t\t<uni-popup ref=\"popupBottom\" type=\"bottom\" @change=\"switchPop\">\r\n\t\t\t<slot>\r\n\t\t\t<view class=\"qiun-columns\">\r\n\t\t\t\t<view class=\"qiun-charts\" >\r\n\t\t\t\t\t<!--#ifdef MP-ALIPAY -->\r\n\t\t\t\t\t<canvas canvas-id=\"canvasLineA\" id=\"canvasLineA\" class=\"charts\" :width=\"cWidth*pixelRatio\" :height=\"cHeight*pixelRatio\" :style=\"{'width':cWidth+'px','height':cHeight+'px'}\" disable-scroll=true @touchstart=\"touchLineA\" @touchmove=\"moveLineA\" @touchend=\"touchEndLineA\"></canvas>\r\n\t\t\t\t\t<!--#endif-->\r\n\t\t\t\t\t<!--#ifndef MP-ALIPAY -->\r\n\t\t\t\t\t<canvas canvas-id=\"canvasLineA\" id=\"canvasLineA\" class=\"charts\"   disable-scroll=true @touchstart=\"touchLineA\" @touchmove=\"moveLineA\" @touchend=\"touchEndLineA\"></canvas>\r\n\t\t\t\t\t<!--#endif-->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t</slot>\t\r\n\t\t</uni-popup>\r\n        <view class=\"online-avatar-container\">\r\n            <view class=\"online-avatar-item\" v-for=\"(user, key) in room.onlineUsers.users\" :key=\"key\" \r\n\t\t\t:style=\"{transform:'translateX('+ (room.onlineUsers.users.length - key-1)*20 +'rpx' +')'}\">\r\n                <image :src=\"user.avatar\"></image>\r\n            </view>\r\n            <view class=\"online-count\">{{room.onlineUsers.count}}</view>\r\n        </view>\r\n        <view class=\"chat-room-container\">\r\n            <scroll-view class=\"chat-room-box\" scroll-y=\"true\" :scroll-into-view=\"contentPosition\"\r\n                         show-scrollbar=\"true\">\r\n                <view class=\"message-box\" v-for=\"(message, key) in room.messages\" :key=\"key\" :id=\"'message-box'+ key\">\r\n                    <view class=\"message-item\">\r\n                        <text class=\"user-name\">{{message && message.senderNickname}}:</text>\r\n                        <text :class=\"message.senderUserId == room.currentUser.id ? 'user-message self' : 'user-message' \">\r\n                            {{message && message.content}}\r\n                        </text>\r\n                    </view>\r\n                </view>\r\n            </scroll-view>\r\n            <view class=\"chat-room-input\">\r\n                <view style=\"position: relative;\">\r\n                    <input class=\"uni-input\" :value=\"newMessageContent\" placeholder=\"输入你的答案..\" @input=\"onInputMessage\"/>\r\n\t\t\t\t\t<view class=\"uni-btn\" v-show=\"!isPopuping\" @click=\"sendMessage(room.MessageType.CHAT, newMessageContent)\">↑</view>\r\n                </view>\r\n                <image class=\"heart\" @click=\"callQuest(room.MessageType.PROP, '')\"\r\n                       src=\"../../../static/images/check.svg\"></image>\r\n                <image class=\"heart\" @click=\"openPopup\"\r\n                       src=\"../../../static/images/log.svg\"></image>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    import ChatRoomService from '../../../lib/chatservice.js';\r\n\timport uniFab from '@/components/uni-fab/uni-fab.vue';\r\n\timport uCharts from '@/js_sdk/u-charts/u-charts/u-charts.js';\r\n\timport uniPopup from '@/components/uni-popup/uni-popup.vue'\r\n\timport uniPopupMessage from '@/components/uni-popup/uni-popup-message.vue'\r\n\timport uniPopupDialog from '@/components/uni-popup/uni-popup-dialog.vue'\r\n\t\r\n\tvar _self;\r\n\tvar canvaLineA=null;\r\n    export default {\r\n\t\tcomponents: {\r\n\t\t    uniFab,\r\n\t\t\tuniPopup,\r\n\t\t\tuniPopupMessage,\r\n\t\t\tuniPopupDialog\r\n\t\t},\r\n        data() {\r\n            return {\r\n                room: null,\r\n                prop: {\r\n                    showPropType: 0,\r\n                    play: false,\r\n                    timer: null\r\n                },\r\n                newMessageContent: \"\",\r\n                contentPosition: '',\r\n                chatRoomService: null,\r\n\t\t\t\tisPopuping: false,\r\n\t\t\t\tisOk: false,\r\n\t\t\t\tisOwner: false,\r\n\t\t\t\towner: '',\r\n\t\t\t\tgameTurn: 0,\r\n\t\t\t\t//\n\t\t\t\tcWidth:'',\r\n\t\t\t\tcHeight:'',\r\n\t\t\t\tpixelRatio:1,\r\n\t\t\t\ttextarea:''\r\n\t\t\t\t\r\n            }\r\n        },\r\n        onLoad(options) {\r\n            //获取数据\r\n            var roomToken = JSON.parse(options.roomToken);\r\n\t\t\tvar that = this;\r\n\t\t\t\r\n\t\t\t_self = this;\r\n\t\t\t//#ifdef MP-ALIPAY\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\tif(res.pixelRatio>1){\r\n\t\t\t\t\t\t//正常这里给2就行，如果pixelRatio=3性能会降低一点\r\n\t\t\t\t\t\t//_self.pixelRatio =res.pixelRatio;\r\n\t\t\t\t\t\t_self.pixelRatio =2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//#endif\r\n\t\t\tthis.cWidth=uni.upx2px(600);\r\n\t\t\tthis.cHeight=uni.upx2px(400);\r\n\t\t\t//this.getServerData();\r\n\t\t\t\r\n            //设置导航标题\r\n            uni.setNavigationBarTitle({\r\n                title: roomToken.roomName\r\n            });\r\n\t\t\t\r\n\t\t\tconst db = wx.cloud.database({\r\n\t\t\t\tenv: 'rooms-7glacbsg9acdae52'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdb.collection('totalRooms').where({\r\n\t\t\t\troomId: roomToken.roomId,\r\n\t\t\t}).get().then(res => {\r\n\t\t\t\t// res.data 包含该记录的数据\r\n\t\t\t\tconsole.log(res.data[0]);\r\n\t\t\t\t//that.$set(that.roomList, res.data.roomInfo);\r\n\t\t\t\tthat.owner = res.data[0].owner;\r\n\t\t\t\tconsole.log(\"nickname:\");\r\n\t\t\t\tconsole.log(currentUser.nickname);\r\n\t\t\t\tconsole.log(\"owner:\")\r\n\t\t\t\tconsole.log(that.owner);\r\n\t\t\t\t//if(currentUser.nickname == that.owner){\r\n\t\t\t\t//\tthat.isOwner = true;\r\n\t\t\t\t//}\r\n\t\t\t});\r\n\r\n            //当前用户\r\n            var currentUser = {\r\n                id: roomToken.userId,\r\n                avatar: roomToken.avatar,\r\n                nickname: roomToken.nickname,\r\n            };\r\n\r\n            var room = {\r\n                id: roomToken.roomId,\r\n                name: roomToken.roomName,\r\n\t\t\t\tMessageType :roomToken.MessageType\r\n            };\r\n\t\t\t\r\n            //构造chatRoomService\r\n            this.chatRoomService = new ChatRoomService(room, currentUser);\r\n            this.chatRoomService.initialWhenNewMessage(this.whenNewMessage);\r\n\t\t\t//console.log(typeof(parseInt(room.id)));\r\n\t\t\t//console.log(room);\r\n\t\t\t//this.chatRoomService.initialOnlineUsers(parseInt(room.id));\r\n            this.chatRoomService.connectGoEasyIM();\r\n\r\n            //获取当前聊天室数据\r\n            this.room = this.chatRoomService.room;\r\n\r\n        },\r\n        onBackPress() {//返回按钮\r\n            //断开连接\r\n            this.chatRoomService.quitRoom();\r\n        },\r\n        //todo:xxxx\r\n        beforeDestroy() {\r\n            this.chatRoomService.quitRoom();\r\n        },\r\n        methods: {\r\n            onInputMessage(event) {//双向绑定消息 兼容\r\n                this.newMessageContent = event.target.value;\r\n            },\r\n            whenNewMessage(message) {//新消息监听\r\n                if (message.type == this.room.MessageType.PROP && !this.isOwner) {\r\n                    this.openAsk();\r\n                }\r\n\t\t\t\tconsole.log(\"newMessage:\");\r\n\t\t\t\tconsole.log(message);\r\n                setTimeout(() => {\r\n                    this.contentPosition = 'message-box' + (this.room.messages.length - 1);\r\n                }, 300)\r\n            },\r\n\t\t\tcallQuest (messageType, content){\r\n\t\t\t\tif (messageType == this.room.MessageType.PROP){\r\n\t\t\t\t\tthis.openCount();\r\n\t\t\t\t}\r\n\t\t\t},\r\n            sendMessage(messageType, content) {//发送消息\r\n                if (content == \"\" && messageType == this.room.MessageType.CHAT) return;\r\n                var message = {\r\n                    senderNickname: this.room.currentUser.nickname,\r\n                    type: messageType,\r\n                    content: content\r\n                }\r\n                this.chatRoomService.sendMessages(this.room.id, message);\r\n                this.newMessageContent = \"\";\r\n\t\t\t\tif (message.type == this.room.MessageType.PROP) {\r\n\t\t\t\t    this.isOk = true;\r\n\t\t\t\t\tthis.isOwner = true;\r\n\t\t\t\t\tthis.owner = this.room.currentUser.nickname;\r\n\t\t\t\t\tvar message = {\r\n\t\t\t\t\t    senderNickname: this.room.currentUser.nickname,\r\n\t\t\t\t\t    type: 2,\r\n\t\t\t\t\t    content: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.chatRoomService.sendMessages(this.room.id, message);\r\n\t\t\t\t\tconsole.log(\"im okkkkkkkk\");\r\n\t\t\t\t}\r\n            },\r\n            openPopup() {\r\n\t\t\t\tconsole.log(this.room.res);\r\n\t\t\t\tthis.getResData();\r\n\t\t\t\tthis.$refs.popupBottom.open();\r\n\t\t\t},\t\t\r\n\t\t\topenAsk() {\r\n\t\t\t\tthis.$refs.popupAsk.open();\r\n\t\t\t},\r\n\t\t\topenCount() {\r\n\t\t\t\tthis.$refs.popupCount.open();\r\n\t\t\t},\r\n\t\t\tgameTurns(done, value) {\r\n\t\t\t\tthis.gameTurn = value;\r\n\t\t\t\tthis.sendMessage(this.room.MessageType.PROP, value);\r\n\t\t\t\tdone();\r\n\t\t\t},\r\n\t\t\tswitchPop (){\r\n\t\t\t\tthis.isPopuping = !this.isPopuping;\r\n\t\t\t},\r\n\t\t\tchecked(done) {\r\n\t\t\t\tconsole.log(\"checked!!!!!!!\");\r\n\t\t\t\tthis.isOk = true;\r\n\t\t\t\tvar message = {\r\n\t\t\t\t    senderNickname: this.room.currentUser.nickname,\r\n\t\t\t\t    type: 2,\r\n\t\t\t\t    content: \"\"\r\n\t\t\t\t}\r\n\t\t\t\tthis.chatRoomService.sendMessages(this.room.id, message);\r\n\t\t\t\tconsole.log(\"im okkkkkkkk\");\r\n\t\t\t\tdone();\r\n\t\t\t},\r\n\t\t\t\t\t\t//\r\n\t\t\tgetResData() {\r\n\t\t\t\tlet LineA={categories:[],series:[]};\r\n\t\t\t\t//这里我后台返回的是数组，所以用等于，如果您后台返回的是单条数据，需要push进去\r\n\t\t\t\tLineA.categories=this.room.res.categories;\r\n\t\t\t\tLineA.series=this.room.res.series;\r\n\t\t\t\t_self.textarea = JSON.stringify(this.room.res);\r\n\t\t\t\t_self.showLineA(\"canvasLineA\",LineA);\r\n\t\t\t}/*,\r\n\t\t\tgetServerData(){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://www.ucharts.cn/data.json',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log(\"data: \");\r\n\t\t\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\t\t\tlet LineA={categories:[],series:[]};\r\n\t\t\t\t\t\t//这里我后台返回的是数组，所以用等于，如果您后台返回的是单条数据，需要push进去\r\n\t\t\t\t\t\tLineA.categories=this.room.res.categories;\r\n\t\t\t\t\t\tLineA.series=this.room.res.series;\r\n\t\t\t\t\t\t_self.textarea = JSON.stringify(this.room.res);\r\n\t\t\t\t\t\t_self.showLineA(\"canvasLineA\",LineA);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t_self.tips=\"网络错误，小程序端请检查合法域名\";\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}*/,\r\n\t\t\tshowLineA(canvasId,chartData){\r\n\t\t\t\tcanvaLineA=new uCharts({\r\n\t\t\t\t\t$this:_self,\r\n\t\t\t\t\tcanvasId: canvasId,\r\n\t\t\t\t\ttype: 'line',\r\n\t\t\t\t\tfontSize:11,\r\n\t\t\t\t\tpadding:[30,0,0,30],\r\n\t\t\t\t\tlegend:{\r\n\t\t\t\t\t\tshow:true,\r\n\t\t\t\t\t\tpadding:5,\r\n\t\t\t\t\t\tlineHeight:11,\r\n\t\t\t\t\t\tmargin:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataLabel:true,\r\n\t\t\t\t\tdataPointShape:true,\r\n\t\t\t\t\tdataPointShapeType:'hollow',\r\n\t\t\t\t\tbackground:'#FFFFFF',\r\n\t\t\t\t\tpixelRatio:_self.pixelRatio,\r\n\t\t\t\t\tcategories: chartData.categories,\r\n\t\t\t\t\tseries: chartData.series,\r\n\t\t\t\t\tanimation: true,\r\n\t\t\t\t\tenableScroll: true,//开启图表拖拽功能\r\n\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\tdisableGrid:false,\r\n\t\t\t\t\t\ttype:'grid',\r\n\t\t\t\t\t\tgridType:'dash',\r\n\t\t\t\t\t\titemCount:4,\r\n\t\t\t\t\t\tscrollShow:true,\r\n\t\t\t\t\t\tscrollAlign:'left'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\t//disabled:true\r\n\t\t\t\t\t\tgridType:'dash',\r\n\t\t\t\t\t\tsplitNumber:5,\r\n\t\t\t\t\t\tmin:0,\r\n\t\t\t\t\t\tmax:100,\r\n\t\t\t\t\t\tformat:(val)=>{return val.toFixed(0)}//如不写此方法，Y轴刻度默认保留两位小数\r\n\t\t\t\t\t},\r\n\t\t\t\t\twidth: _self.cWidth*_self.pixelRatio,\r\n\t\t\t\t\theight: _self.cHeight*_self.pixelRatio,\r\n\t\t\t\t\textra: {\r\n\t\t\t\t\t\tline:{\r\n\t\t\t\t\t\t\ttype: 'straight'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\ttouchLineA(e){\r\n\t\t\t\tcanvaLineA.scrollStart(e);\r\n\t\t\t},\r\n\t\t\tmoveLineA(e) {\r\n\t\t\t\tcanvaLineA.scroll(e);\r\n\t\t\t},\r\n\t\t\ttouchEndLineA(e) {\r\n\t\t\t\tcanvaLineA.scrollEnd(e);\r\n\t\t\t\t//下面是toolTip事件，如果滚动后不需要显示，可不填写\r\n\t\t\t\tcanvaLineA.touchLegend(e);\r\n\t\t\t\tcanvaLineA.showToolTip(e, {\r\n\t\t\t\t\tformat: function (item, category) {\r\n\t\t\t\t\t\treturn category + ' ' + item.name + ':' + item.data \r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tchangeData(){\r\n\t\t\t\tif(isJSON(_self.textarea)){\r\n\t\t\t\t\tlet newdata=JSON.parse(_self.textarea);\r\n\t\t\t\t\tcanvaLineA.updateData({\r\n\t\t\t\t\t\tseries: newdata.series,\r\n\t\t\t\t\t\tcategories: newdata.categories,\r\n\t\t\t\t\t\tscrollPosition:'right',\r\n\t\t\t\t\t\tanimation:false\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'数据格式错误',\r\n\t\t\t\t\t\timage:'../../../static/images/alert-warning.png'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    page {\r\n        height: 100%;;\r\n    }\r\n\r\n    uni-page-body {\r\n        height: 100%;;\r\n    }\r\n\r\n    .chat-room {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100%;;\r\n    }\r\n\r\n    .online-avatar-container {\r\n        height: 80rpx;\r\n        display: flex;\r\n        justify-content: flex-end;\r\n        padding: 28rpx;\r\n        box-shadow: 10rpx 30rpx 50rpx #fff;\r\n        z-index: 40;\r\n    }\r\n\r\n    .online-avatar-item {\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n        border-radius: 40rpx;\r\n        text-align: center;\r\n        line-height: 80rpx;\r\n        background: rgba(51, 51, 51, 0.3);\r\n        color: #fff;\r\n        font-size: 18rpx 28rpx;\r\n    }\r\n\r\n    .online-count {\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n        border-radius: 40rpx;\r\n        text-align: center;\r\n        line-height: 80rpx;\r\n        background: rgba(51, 51, 51, 0.3);\r\n        color: #fff;\r\n        font-size: 28rpx;\r\n    }\r\n\r\n    .online-avatar-item image {\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n\t\tborder-radius: 50%;\r\n    }\r\n\r\n    .chat-room-container {\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .chat-room-box {\r\n        flex: 1;\r\n        padding: 10rpx 38rpx;\r\n        overflow: auto;\r\n        padding-top: 20rpx;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .message-box {\r\n        margin-top: 16rpx;\r\n    }\r\n\r\n    .message-item {\r\n        box-sizing: border-box;\r\n        height: 72rpx;\r\n        background-color: rgba(196, 196, 196, 0.2);\r\n        display: inline-block;\r\n        font-size: 28rpx;\r\n        border-radius: 100rpx;\r\n        padding: 18rpx 30rpx;\r\n        font-family: Microsoft YaHei UI;\r\n    }\r\n\r\n    .user-name {\r\n        color: #D02129;\r\n        font-family: Microsoft YaHei UI;\r\n    }\r\n\r\n    .user-message {\r\n        color: #333;\r\n        font-family: Microsoft YaHei UI;\r\n    }\r\n\r\n    .chat-room-input {\r\n        height: 92rpx;\r\n        line-height: 92rpx;\r\n        padding: 28rpx;\r\n        display: flex;\r\n    }\r\n\r\n    .uni-input {\r\n        width: 528rpx;\r\n        background-color: rgba(51, 51, 51, 0.1);\r\n        height: 92rpx;\r\n        border-radius: 100rpx;\r\n        box-sizing: border-box;\r\n        padding: 26rpx 40rpx;\r\n        font-size: 28rpx;\r\n    }\r\n\r\n    .uni-btn {\r\n        position: absolute;\r\n        width: 72rpx;\r\n        height: 72rpx;\r\n        background: #D02129;\r\n        right: 10rpx;\r\n        top: 10rpx;\r\n        border-radius: 72rpx;\r\n        text-align: center;\r\n        line-height: 72rpx;\r\n        color: #fff;\r\n        font-weight: bold;\r\n        font-size: 32rpx;\r\n\t\tz-index: 99;\r\n    }\r\n\r\n    .heart {\r\n        width: 80rpx;\r\n        height: 92rpx;\r\n        padding: 0 15rpx;\r\n    }\r\n\r\n    .rocket {\r\n        width: 40rpx;\r\n        height: 92rpx;\r\n    }\r\n\r\n    .self {\r\n        color: #D02129;\r\n    }\r\n\r\n    .show-animation {\r\n        width: 80rpx;\r\n        height: 320rpx;\r\n        position: fixed;\r\n        z-index: 44;\r\n        left: 50%;\r\n        bottom: 80rpx;\r\n        margin: 0 -40rpx;\r\n        justify-content: flex-end;\r\n        animation: myanimation 2s linear;\r\n    }\r\n\r\n    .prop-heart {\r\n        height: 80rpx;\r\n        width: 80rpx;\r\n    }\r\n\r\n    .prop-rocket {\r\n        height: 160rpx;\r\n        width: 80rpx;\r\n    }\r\n\t\r\n\t.qiun-columns {\r\n\t\twidth: 600upx;\r\n\t\tborder-radius: 30upx;\r\n\t\tmargin-left: 80upx;\r\n\t\tmargin-bottom: 50upx;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\t\r\n\t.qiun-charts {\r\n\t\twidth: 600upx;\r\n\t\theight: 400upx;\t\t\r\n\t\tborder-radius: 30upx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\t\t\r\n\t.charts {\r\n\t\twidth: 600upx;\r\n\t\theight: 400upx;\r\n\t\tborder-radius: 30upx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n    @keyframes myanimation {\r\n        from {\r\n            bottom: 80rpx;\r\n        }\r\n        to {\r\n            bottom: 600rpx;\r\n        }\r\n    }\r\n\r\n</style>\r\n","import mod from \"-!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1606839493392\n      var cssReload = require(\"C:/Users/pro/Downloads/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}